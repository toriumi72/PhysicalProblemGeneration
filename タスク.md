# タスク

以下は、各機能実装に向けたタスク一覧です。  
元からある内容は消さず、必要なタスクをすべて洗い出しました。  
最低限のMVPを達成するために必須の実装や、中途半端な状態で残っている部分の補完も含めています。

---

## 1. データベース＆認証
- [ ] Stripe等の決済システムとの連携時、Webhookでユーザの `is_pro` フラグを更新する処理を実装する
- [ ] usersテーブルの中の、display_name等のカラム更新時に、都度useUserの更新を行う（リアルタイム更新か、ページ遷移時に更新か、更新と同時にフェッチ関数を発火させるかを検討）
- [ ] ユーザー登録、ログイン、ログアウト、パスワードリセットなどの基本認証フローの動作確認およびテストケース作成（MVP必須）
- [ ] 認証済みルートのミドルウェア実装と、各保護されたページでの認証チェックを実装する
- [ ] ユーザーデータのキャッシュ更新およびリアルタイム同期（WebSocketまたはPollingによる）の仕組みを検討し、必要ならMVPとして最小限実装する

---

## 2. UI/UX
### 基本機能
- [ ] 生成されたページでの達成度（⚪︎、×、△等）の選択、問題の終了、メモ機能の実装
- [ ] 問題管理ページの実装
  - 検索・フィルタ機能の追加
- [ ] ダッシュボード画面の実装
  - 学習状況（生成問題数、正解率、統計グラフ）の表示
- [ ] 設定ページで、無料プランの生成数の表示と更新処理の実装
- [ ] ユーザー入力に対するバリデーションおよび適切なエラーメッセージの表示

### Pro専用UI機能
- [ ] 詳細設定パネルの実装
  - 難易度、問題形式、解説詳細度（AIに聞きながらの回答インターフェース）
- [ ] Pro専用ダッシュボードの実装
  - 詳細統計情報、生成時間などの高度な指標の表示
- [ ] 料金プラン連動UIの実装
  - ユーザの `is_pro` フラグに基づく条件分岐および専用バナー表示
- [ ] Pro専用UIのパフォーマンス最適化と状態管理の統一（UX改善のためのユーザーテスト実施）

---

## 3. API／バックエンド処理
### 基本問題生成
- [ ] 基本問題生成APIの実装  
  - 外部APIとの連携、レスポンス整形、データベースへの保存処理
- [ ] エラーハンドリングとログ収集の強化
- [ ] 基本問題生成APIの統合テストとモックテストの実装（MVP検証用）
- [ ] APIリクエスト・レスポンスのフォーマット統一

### Pro専用機能
- [ ] 高度な生成パラメータ設定用APIの実装  
  - 過去の回答結果等からの動的プロンプト生成のロジックを含む
- [ ] Pro専用LLSエンドポイント／カスタムモデル利用のロジック実装
- [ ] Proユーザ向けのレート制限および優先キュー管理の実装（MVPとして基本構造を構築）

---

## 4. カスタムプロンプトエンジン
- [ ] プロ専用のリッチテキストエディタUIの実装  
  - ユーザが独自のプロンプトテンプレートを作成可能にする
- [ ] プロフィールに紐付けたカスタムプロンプト保存用テーブルの設計とAPI実装
- [ ] 作成済みプロンプトの一覧表示および再利用機能の実装
- [ ] リッチエディタの入力バリデーションとプレビュー機能の実装
- [ ] カスタムプロンプトのCRUD（作成、更新、削除）機能の実装とテスト
- [ ] プロンプト保存データのバックアップおよびバージョン管理の検討

---

## 5. インフラ・セキュリティ＆CI/CD
- [ ] 非同期処理のタイムアウト、リトライ、エラーハンドリングの強化
- [ ] Auth0の導入
- [ ] HTTPS/TLS通信環境の構築と証明書の設定（テストおよび本番環境）
- [ ] ログ収集システムの設定と統合（例：ELKスタック等の利用検討）

---

## 6. サポート・運用
- [ ] Pro専用問い合わせフォーム、FAQ、ライブチャットリンクの実装
- [ ] フィードバック情報の収集機能と、管理コンソールでの集計処理の実装
- [ ] 問い合わせフォームのバリデーションと、送信後の確認メッセージの実装
- [ ] FAQコンテンツの作成と、管理システムとの連携
- [ ] 外部ライブチャットツールとの連携テストと実装
- [ ] 運用・保守手順書の作成と、障害時のエスカレーションフローの設定
- [ ] 定期的なユーザフィードバックレポートの生成と、改善サイクルの確立

---

## 7. ドキュメンテーション・テスト
- [ ] API仕様書、ユーザマニュアル、開発ドキュメントの整備
- [ ] ユーザーテスト、フィードバック調査、改善サイクルの構築
- [ ] ユニットテスト、インテグレーションテスト、E2Eテストの充実と自動実行の設定 